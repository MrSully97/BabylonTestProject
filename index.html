<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Babylon.js Playground</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>

  <!-- Babylon globals (kept so window.BABYLON is available if your app expects it) -->
  <script src="https://assets.babylonjs.com/generated/Assets.js"></script>
  <script src="https://cdn.babylonjs.com/recast.js"></script>
  <script src="https://cdn.babylonjs.com/ammo.js"></script>
  <script src="https://cdn.babylonjs.com/havok/HavokPhysics_umd.js"></script>
  <script src="https://cdn.babylonjs.com/cannon.js"></script>
  <script src="https://cdn.babylonjs.com/Oimo.js"></script>
  <script src="https://cdn.babylonjs.com/earcut.min.js"></script>
  <script src="https://cdn.babylonjs.com/babylon.js"></script>
  <script src="https://cdn.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
  <script src="https://cdn.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script>
  <script src="https://cdn.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script>
  <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.js"></script>
  <script src="https://cdn.babylonjs.com/serializers/babylonjs.serializers.min.js"></script>
  <script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script>
  <script src="https://cdn.babylonjs.com/addons/babylonjs.addons.min.js"></script>
  <script src="https://cdn.babylonjs.com/inspector/babylon.inspector.bundle.js"></script>

  <style>
    html,body,#renderCanvas{width:100%;height:100%;margin:0;padding:0;overflow:hidden;background:#000}
  </style>
</head>
<body>
  <canvas id="renderCanvas"></canvas>
  <script type="module">
    // Turn bundle text into a module URL
    const code = "// snapshot:index.js\nvar createScene = function() {\n  var scene = new BABYLON.Scene(engine);\n  var camera = new BABYLON.ArcRotateCamera(\"camera\", 0, 1, 10, BABYLON.Vector3.Zero(), scene);\n  camera.attachControl(canvas, true);\n  var light = new BABYLON.HemisphericLight(\"light\", new BABYLON.Vector3(0, 1, 0), scene);\n  light.intensity = 0.7;\n  async function initAudio() {\n    const audioEngine = await BABYLON.CreateAudioEngineAsync();\n    await audioEngine.unlockAsync();\n    BABYLON.CreateStreamingSoundAsync(\"big-man-blastoise\", \"https://raw.githubusercontent.com/MrSully97/BabylonTestProject/master/big-man-blastoise.mp3\", { loop: true, autoplay: true }, audioEngine);\n  }\n  var ground = BABYLON.MeshBuilder.CreateGround(\"ground\", { width: 6, height: 6 }, scene);\n  const groundMaterial = new BABYLON.StandardMaterial(\"Ground Material\", scene);\n  groundMaterial.diffuseColor = BABYLON.Color3.Red();\n  let groundTexture = new BABYLON.Texture(Assets.textures.checkerboard_basecolor_png.path, scene);\n  groundMaterial.diffuseTexture = groundTexture;\n  ground.material = groundMaterial;\n  BABYLON.ImportMeshAsync(\"https://raw.githubusercontent.com/MrSully97/BabylonTestProject/master/Hamster.glb\").then((result) => {\n    result.meshes[1].position.x = 0;\n    const myMesh1 = scene.getMeshByName(\"myMesh_1\");\n    myMesh1.rotation.y = Math.PI / 2;\n  });\n  return scene;\n};\nexport {\n  createScene\n};\n//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic25hcHNob3Q6aW5kZXguanMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImV4cG9ydCBjb25zdCBjcmVhdGVTY2VuZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBUaGlzIGNyZWF0ZXMgYSBiYXNpYyBCYWJ5bG9uIFNjZW5lIG9iamVjdCAobm9uLW1lc2gpXG4gICAgdmFyIHNjZW5lID0gbmV3IEJBQllMT04uU2NlbmUoZW5naW5lKTtcblxuICAgIHZhciBjYW1lcmEgPSBuZXcgQkFCWUxPTi5BcmNSb3RhdGVDYW1lcmEoXCJjYW1lcmFcIiwgMCwgMSwgMTAsIEJBQllMT04uVmVjdG9yMy5aZXJvKCksIHNjZW5lKTtcblxuICAgIC8vIFRoaXMgYXR0YWNoZXMgdGhlIGNhbWVyYSB0byB0aGUgY2FudmFzXG4gICAgY2FtZXJhLmF0dGFjaENvbnRyb2woY2FudmFzLCB0cnVlKTtcblxuICAgIC8vIFRoaXMgY3JlYXRlcyBhIGxpZ2h0LCBhaW1pbmcgMCwxLDAgLSB0byB0aGUgc2t5IChub24tbWVzaClcbiAgICB2YXIgbGlnaHQgPSBuZXcgQkFCWUxPTi5IZW1pc3BoZXJpY0xpZ2h0KFwibGlnaHRcIiwgbmV3IEJBQllMT04uVmVjdG9yMygwLCAxLCAwKSwgc2NlbmUpO1xuXG4gICAgLy8gRGVmYXVsdCBpbnRlbnNpdHkgaXMgMS4gTGV0J3MgZGltIHRoZSBsaWdodCBhIHNtYWxsIGFtb3VudFxuICAgIGxpZ2h0LmludGVuc2l0eSA9IDAuNztcblxuICAgIC8vIEF1ZGlvIGVuZ2luZVxuICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRBdWRpbygpIHtcbiAgICAgICAgY29uc3QgYXVkaW9FbmdpbmUgPSBhd2FpdCBCQUJZTE9OLkNyZWF0ZUF1ZGlvRW5naW5lQXN5bmMoKTtcbiAgICAgICAgYXdhaXQgYXVkaW9FbmdpbmUudW5sb2NrQXN5bmMoKTtcblxuICAgICAgICAvLyBMb29waW5nIHNvdW5kXG4gICAgICAgIEJBQllMT04uQ3JlYXRlU3RyZWFtaW5nU291bmRBc3luYyhcImJpZy1tYW4tYmxhc3RvaXNlXCIsIFwiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL01yU3VsbHk5Ny9CYWJ5bG9uVGVzdFByb2plY3QvbWFzdGVyL2JpZy1tYW4tYmxhc3RvaXNlLm1wM1wiLCB7IGxvb3A6IHRydWUsIGF1dG9wbGF5OiB0cnVlIH0sIGF1ZGlvRW5naW5lKVxuICAgIH1cblxuICAgIC8vIGluaXRBdWRpbygpXG5cbiAgICAvLyBPdXIgYnVpbHQtaW4gJ2dyb3VuZCcgc2hhcGUuXG4gICAgdmFyIGdyb3VuZCA9IEJBQllMT04uTWVzaEJ1aWxkZXIuQ3JlYXRlR3JvdW5kKFwiZ3JvdW5kXCIsIHt3aWR0aDogNiwgaGVpZ2h0OiA2fSwgc2NlbmUpO1xuICAgIFxuICAgIGNvbnN0IGdyb3VuZE1hdGVyaWFsID0gbmV3IEJBQllMT04uU3RhbmRhcmRNYXRlcmlhbChcIkdyb3VuZCBNYXRlcmlhbFwiLCBzY2VuZSk7XG4gICAgZ3JvdW5kTWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gQkFCWUxPTi5Db2xvcjMuUmVkKCk7XG4gICAgbGV0IGdyb3VuZFRleHR1cmUgPSBuZXcgQkFCWUxPTi5UZXh0dXJlKEFzc2V0cy50ZXh0dXJlcy5jaGVja2VyYm9hcmRfYmFzZWNvbG9yX3BuZy5wYXRoLCBzY2VuZSk7XG4gICAgZ3JvdW5kTWF0ZXJpYWwuZGlmZnVzZVRleHR1cmUgPSBncm91bmRUZXh0dXJlO1xuICAgIGdyb3VuZC5tYXRlcmlhbCA9IGdyb3VuZE1hdGVyaWFsO1xuXG4gICAgQkFCWUxPTi5JbXBvcnRNZXNoQXN5bmMoXCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vTXJTdWxseTk3L0JhYnlsb25UZXN0UHJvamVjdC9tYXN0ZXIvSGFtc3Rlci5nbGJcIikudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIHJlc3VsdC5tZXNoZXNbMV0ucG9zaXRpb24ueCA9IDA7XG4gICAgICAgIGNvbnN0IG15TWVzaDEgPSBzY2VuZS5nZXRNZXNoQnlOYW1lKFwibXlNZXNoXzFcIik7XG4gICAgICAgIG15TWVzaDEucm90YXRpb24ueSA9IE1hdGguUEkgLyAyO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNjZW5lO1xufTtcbi8vIyBzb3VyY2VVUkw9ZmlsZTovLy9wZy9pbmRleC5qcyJdLAogICJtYXBwaW5ncyI6ICI7QUFBTyxJQUFNLGNBQWMsV0FBWTtBQUVuQyxNQUFJLFFBQVEsSUFBSSxRQUFRLE1BQU0sTUFBTTtBQUVwQyxNQUFJLFNBQVMsSUFBSSxRQUFRLGdCQUFnQixVQUFVLEdBQUcsR0FBRyxJQUFJLFFBQVEsUUFBUSxLQUFLLEdBQUcsS0FBSztBQUcxRixTQUFPLGNBQWMsUUFBUSxJQUFJO0FBR2pDLE1BQUksUUFBUSxJQUFJLFFBQVEsaUJBQWlCLFNBQVMsSUFBSSxRQUFRLFFBQVEsR0FBRyxHQUFHLENBQUMsR0FBRyxLQUFLO0FBR3JGLFFBQU0sWUFBWTtBQUdsQixpQkFBZSxZQUFZO0FBQ3ZCLFVBQU0sY0FBYyxNQUFNLFFBQVEsdUJBQXVCO0FBQ3pELFVBQU0sWUFBWSxZQUFZO0FBRzlCLFlBQVEsMEJBQTBCLHFCQUFxQiwrRkFBK0YsRUFBRSxNQUFNLE1BQU0sVUFBVSxLQUFLLEdBQUcsV0FBVztBQUFBLEVBQ3JNO0FBS0EsTUFBSSxTQUFTLFFBQVEsWUFBWSxhQUFhLFVBQVUsRUFBQyxPQUFPLEdBQUcsUUFBUSxFQUFDLEdBQUcsS0FBSztBQUVwRixRQUFNLGlCQUFpQixJQUFJLFFBQVEsaUJBQWlCLG1CQUFtQixLQUFLO0FBQzVFLGlCQUFlLGVBQWUsUUFBUSxPQUFPLElBQUk7QUFDakQsTUFBSSxnQkFBZ0IsSUFBSSxRQUFRLFFBQVEsT0FBTyxTQUFTLDJCQUEyQixNQUFNLEtBQUs7QUFDOUYsaUJBQWUsaUJBQWlCO0FBQ2hDLFNBQU8sV0FBVztBQUVsQixVQUFRLGdCQUFnQixtRkFBbUYsRUFBRSxLQUFLLENBQUMsV0FBVztBQUMxSCxXQUFPLE9BQU8sQ0FBQyxFQUFFLFNBQVMsSUFBSTtBQUM5QixVQUFNLFVBQVUsTUFBTSxjQUFjLFVBQVU7QUFDOUMsWUFBUSxTQUFTLElBQUksS0FBSyxLQUFLO0FBQUEsRUFDbkMsQ0FBQztBQUVELFNBQU87QUFDWDsiLAogICJuYW1lcyI6IFtdCn0K\n";
    const blob = new Blob([code], { type: 'text/javascript' });
    const url = URL.createObjectURL(blob);

    const BABYLON = window.BABYLON;
    const canvas = document.getElementById('renderCanvas');

    // Import your bundled app (which exports createScene / default)
    const mod = await import(url);

    let engine = null;
    if (typeof mod.createEngine === 'function') {
      try { engine = await mod.createEngine(); } catch {}
    }
    if (!engine) {
      engine = new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true });
    }
    window.engine = engine; window.canvas = canvas;

    let createScene = mod.createScene || mod.default;
    if (!createScene && mod.Playground?.CreateScene) createScene = (e,c)=>mod.Playground.CreateScene(e,c);
    if (!createScene) throw new Error('No createScene() export found.');

    const scene = await (createScene(engine, canvas) ?? createScene());
    engine.runRenderLoop(()=>scene.render());
    addEventListener('resize', ()=>engine.resize());

    addEventListener('unload', ()=> URL.revokeObjectURL(url));
  </script>
</body>
</html>